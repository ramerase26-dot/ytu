<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pit_Bot - Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 3px solid #FFD700;
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #FFD700, #FFA500, #FFD700);
            z-index: -1;
            border-radius: 30px;
            animation: goldGlow 2s infinite alternate;
        }
        
        @keyframes goldGlow {
            0% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .logo {
            font-family: 'Cairo', sans-serif;
            font-size: 3.5em;
            font-weight: 700;
            color: #000;
            text-shadow: 3px 3px 0 #FFD700;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        
        .user-info {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .user-info h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }
        
        .user-info p {
            font-size: 1.1em;
            margin: 8px 0;
        }
        
        .deposit-info {
            background: #f8f9fa;
            border: 2px solid #28a745;
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .deposit-amount {
            font-size: 1.5em;
            color: #28a745;
            font-weight: 700;
        }
        
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 30px auto;
        }
        
        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #c0c0c0 0%, #ffffff 100%);
            box-shadow: 0 0 30px rgba(0, 150, 255, 0.5);
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.83, 0.67);
            border: 8px solid #FFD700;
        }
        
        #wheel.spinning {
            animation: wheelGlow 0.5s infinite alternate;
        }
        
        @keyframes wheelGlow {
            0% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 0 60px rgba(255, 215, 0, 1); }
        }
        
        .wheel-item {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            z-index: 10;
            color: #FFD700;
            font-size: 2em;
        }
        
        .rail {
            position: absolute;
            top: 50%;
            right: -50px;
            transform: translateY(-50%);
            font-size: 2em;
            color: #FFD700;
            animation: railFlow 2s infinite;
        }
        
        @keyframes railFlow {
            0%, 100% { transform: translateY(-50%) translateX(0); }
            50% { transform: translateY(-50%) translateX(10px); }
        }
        
        .spin-btn {
            background: linear-gradient(135deg, #FF416C 0%, #FF4B2B 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(255, 65, 108, 0.4);
        }
        
        .spin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(255, 65, 108, 0.6);
        }
        
        .spin-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            color: white;
            border-radius: 15px;
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .prize-amount {
            font-size: 2em;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff4444;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 1000;
            display: none;
        }
        
        .prizes-list {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: right;
        }
        
        .prizes-list h4 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .prize-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">Pit_Bot</div>
        
        <div class="user-info">
            <h3>ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
            <p id="username">Ø§Ù„Ù…Ø¹Ø±Ù: Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
            <p id="userId">Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø±Ù: -</p>
        </div>
        
        <div class="deposit-info">
            <h3>ğŸ’³ Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ© Ø´Ø­Ù†</h3>
            <p class="deposit-amount" id="lastDeposit">0 Ù†Ù‚Ø·Ø©</p>
            <p id="depositStatus" style="color: #dc3545; font-weight: bold;">
                âš ï¸ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø´Ø­Ù† 25,000 Ù†Ù‚Ø·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
            </p>
        </div>
        
        <div class="wheel-container">
            <div class="pointer">â–¼</div>
            <div class="rail">ğŸ’¸</div>
            <canvas id="wheel" width="300" height="300"></canvas>
        </div>
        
        <button class="spin-btn" id="spinButton" onclick="spinWheel()" disabled>
            ğŸ¡ ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
        </button>
        
        <div class="result" id="result">
            <h3>ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ!</h3>
            <div class="prize-amount" id="prizeText">0 Ù†Ù‚Ø·Ø©</div>
            <p>ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ ÙÙŠ Ø§Ù„Ø¨ÙˆØª</p>
        </div>
        
        <div class="prizes-list">
            <h4>ğŸ Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø§Ù„Ù…ØªØ§Ø­Ø©:</h4>
            <div class="prize-item"><span>5,000 Ù†Ù‚Ø·Ø©</span><span>2%</span></div>
            <div class="prize-item"><span>10,000 Ù†Ù‚Ø·Ø©</span><span>1%</span></div>
            <div class="prize-item"><span>20,000 Ù†Ù‚Ø·Ø©</span><span>0%</span></div>
            <div class="prize-item"><span>50,000 Ù†Ù‚Ø·Ø©</span><span>0%</span></div>
            <div class="prize-item"><span>Ø­Ø¸ Ø£ÙˆÙØ±</span><span>97%</span></div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>
    
    <script>
        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('user_id') || '';
        const username = urlParams.get('username') || 'Ù…Ø³ØªØ®Ø¯Ù…';
        const lastDeposit = parseInt(urlParams.get('last_deposit') || '0');
        
        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        document.getElementById('username').textContent = `Ø§Ù„Ù…Ø¹Ø±Ù: @${username}`;
        document.getElementById('userId').textContent = `Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø±Ù: ${userId}`;
        document.getElementById('lastDeposit').textContent = `${lastDeposit.toLocaleString()} Ù†Ù‚Ø·Ø©`;
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù‡Ù„ÙŠØ© Ø§Ù„ØªØ¯ÙˆÙŠØ±
        const canSpin = lastDeposit >= 25000;
        const spinButton = document.getElementById('spinButton');
        const depositStatus = document.getElementById('depositStatus');
        
        if (canSpin) {
            spinButton.disabled = false;
            depositStatus.textContent = 'âœ… Ù…Ø¤Ù‡Ù„ Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©';
            depositStatus.style.color = '#28a745';
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø¬Ù„Ø©
        const prizes = [
            { text: "5,000", value: 5000, color: "#FF6B6B", percentage: 2 },
            { text: "10,000", value: 10000, color: "#4ECDC4", percentage: 1 },
            { text: "20,000", value: 20000, color: "#FFD166", percentage: 0 },
            { text: "50,000", value: 50000, color: "#06D6A0", percentage: 0 },
            { text: "Ø­Ø¸ Ø£ÙˆÙØ±", value: 0, color: "#118AB2", percentage: 97 }
        ];
        
        let spinning = false;
        let currentRotation = 0;
        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = Math.min(centerX, centerY) - 10;
        
        // Ø±Ø³Ù… Ø§Ù„Ø¹Ø¬Ù„Ø©
        function drawWheel() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const totalPercentage = prizes.reduce((sum, prize) => sum + prize.percentage, 0);
            let startAngle = 0;
            
            prizes.forEach((prize, index) => {
                const sliceAngle = (2 * Math.PI * prize.percentage) / totalPercentage;
                const endAngle = startAngle + sliceAngle;
                
                // Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø¹Ø©
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                ctx.closePath();
                ctx.fillStyle = prize.color;
                ctx.fill();
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù†Øµ
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(startAngle + sliceAngle / 2);
                ctx.textAlign = 'right';
                ctx.fillStyle = 'white';
                ctx.font = 'bold 18px Cairo';
                ctx.fillText(prize.text, radius - 20, 5);
                ctx.restore();
                
                startAngle = endAngle;
            });
            
            // Ø±Ø³Ù… Ø§Ù„Ù…Ø±ÙƒØ²
            ctx.beginPath();
            ctx.arc(centerX, centerY, 15, 0, 2 * Math.PI);
            ctx.fillStyle = '#FFD700';
            ctx.fill();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 3;
            ctx.stroke();
        }
        
        // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
        function spinWheel() {
            if (spinning || !canSpin) return;
            
            spinning = true;
            spinButton.disabled = true;
            canvas.classList.add('spinning');
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
            const weightedPrizes = [];
            prizes.forEach(prize => {
                for (let i = 0; i < prize.percentage; i++) {
                    weightedPrizes.push(prize);
                }
            });
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
            const randomIndex = Math.floor(Math.random() * weightedPrizes.length);
            const winningPrize = weightedPrizes[randomIndex];
            
            // Ø­Ø³Ø§Ø¨ Ø²Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¯ÙˆÙŠØ±
            const prizeIndex = prizes.findIndex(p => p.value === winningPrize.value);
            const sliceAngle = (2 * Math.PI) / 5;
            const targetAngle = (prizeIndex * sliceAngle) + (sliceAngle / 2) + (5 * 2 * Math.PI);
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
            const spinDuration = 5000; // 5 Ø«ÙˆØ§Ù†ÙŠ
            const startTime = Date.now();
            const startRotation = currentRotation;
            
            function animateSpin() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / spinDuration, 1);
                
                // ØªØ³Ø§Ø±Ø¹ Ø«Ù… ØªØ¨Ø§Ø·Ø¤
                const easeOut = 1 - Math.pow(1 - progress, 3);
                currentRotation = startRotation + (targetAngle * easeOut);
                
                canvas.style.transform = `rotate(${currentRotation}rad)`;
                
                if (progress < 1) {
                    requestAnimationFrame(animateSpin);
                } else {
                    // Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ¯ÙˆÙŠØ±
                    spinning = false;
                    canvas.classList.remove('spinning');
                    
                    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                    setTimeout(() => {
                        document.getElementById('prizeText').textContent = 
                            winningPrize.value > 0 ? 
                            `${winningPrize.value.toLocaleString()} Ù†Ù‚Ø·Ø©` : 
                            winningPrize.text;
                        document.getElementById('result').style.display = 'block';
                        
                        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙˆØª
                        if (winningPrize.value > 0) {
                            sendResultToBot(winningPrize);
                        }
                    }, 1000);
                }
            }
            
            animateSpin();
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙˆØª
        function sendResultToBot(prize) {
            const resultData = {
                user_id: userId,
                username: username,
                prize: prize.text,
                prize_value: prize.value,
                timestamp: new Date().toISOString()
            };
            
            // Ù‡Ù†Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ù„Ø¨ÙˆØª
            const botToken = "8412416342:AAHOsPs5eqcaj5e-WpZHafMbhGYZI4mWiu0";
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¹Ø¨Ø± webhook (ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªØ¶Ø§ÙØ©)
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: userId,
                    text: JSON.stringify(resultData)
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Result sent to bot:', data);
            })
            .catch(error => {
                console.error('Error sending result:', error);
            });
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ø¬Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            drawWheel();
        };
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
        function showNotification(message, isError = true) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = isError ? '#ff4444' : '#00C851';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>
