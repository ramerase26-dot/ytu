<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ ğŸ¡</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            direction: rtl;
        }
        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 30px auto;
        }
        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 10px solid #ffd700;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
        }
        .prize {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            color: #333;
        }
        .spin-btn {
            background: #ff5722;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            margin: 20px;
            transition: 0.3s;
            box-shadow: 0 5px 15px rgba(255,87,34,0.4);
        }
        .spin-btn:hover {
            background: #ff7043;
            transform: scale(1.05);
        }
        .spin-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        #result {
            margin-top: 20px;
            font-size: 22px;
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            display: none;
        }
        .claim-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 15px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</h1>
    <p>Ù‚Ù… Ø¨ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø© ÙˆØ§Ø±Ø¨Ø­ Ø¥Ø­Ø¯Ù‰ Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø§Ù„Ø±Ø§Ø¦Ø¹Ø©!</p>
    
    <div class="wheel-container">
        <div id="wheel"></div>
    </div>
    
    <button class="spin-btn" onclick="spinWheel()">ğŸ¡ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯ÙˆØ±Ø§Ù†</button>
    
    <div id="result">
        <h2 id="prize-text"></h2>
        <button class="claim-btn" onclick="claimPrize()">ğŸ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©</button>
    </div>
    
    <script>
        // Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² ÙˆÙ†Ø³Ø¨Ù‡Ø§ (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ = 100%)
        const prizes = [
            { text: "5000", value: 5000, probability: 30 },  // 30%
            { text: "10000", value: 10000, probability: 25 }, // 25%
            { text: "5%", value: "5%", probability: 15 },    // 15%
            { text: "100000", value: 100000, probability: 10 }, // 10%
            { text: "10%", value: "10%", probability: 10 },  // 10%
            { text: "500000", value: 500000, probability: 5 }, // 5%
            { text: "1000000", value: 1000000, probability: 5 } // 5%
        ];
        
        let currentRotation = 0;
        let canSpin = true;
        let currentPrize = null;
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ø¬Ù„Ø©
        function createWheel() {
            const wheel = $('#wheel');
            wheel.empty();
            let totalProb = 0;
            
            prizes.forEach((prize, index) => {
                const angle = (prize.probability / 100) * 360;
                const rotation = totalProb * 3.6;
                
                const prizeDiv = $(`<div class="prize" style="transform: rotate(${rotation}deg); background: hsl(${index * 50}, 80%, 70%);">
                    <div style="transform: rotate(${angle/2}deg);">${prize.text}</div>
                </div>`);
                
                wheel.append(prizeDiv);
                totalProb += prize.probability;
            });
        }
        
        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const data = params.get('data') || '';
            return data.split('_');
        }
        
        // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
        function spinWheel() {
            if (!canSpin) return;
            
            const [allowed, userId] = getUrlParams();
            
            if (allowed !== 'yes') {
                alert('Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¢Ù†. ÙŠØ¬Ø¨ Ù…Ø±ÙˆØ± 24 Ø³Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø³Ø§Ø¨Ù‚.');
                return;
            }
            
            canSpin = false;
            $('.spin-btn').prop('disabled', true);
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø¬Ø§Ø¦Ø²Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
            const random = Math.random() * 100;
            let cumulative = 0;
            let selectedPrize = null;
            
            for (const prize of prizes) {
                cumulative += prize.probability;
                if (random <= cumulative) {
                    selectedPrize = prize;
                    break;
                }
            }
            
            currentPrize = selectedPrize;
            
            // Ø­Ø³Ø§Ø¨ Ø²Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¯ÙˆÙŠØ±
            const prizeIndex = prizes.indexOf(selectedPrize);
            const segmentAngle = 360 / prizes.length;
            const targetRotation = 360 * 5 + (prizeIndex * segmentAngle) + (Math.random() * segmentAngle);
            
            currentRotation += targetRotation;
            
            $('#wheel').css({
                'transition': 'transform 4s cubic-bezier(0.2, 0.8, 0.3, 1)',
                'transform': `rotate(${currentRotation}deg)`
            });
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ¯ÙˆÙŠØ±
            setTimeout(() => {
                $('#prize-text').text(`ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª: ${selectedPrize.text}`);
                $('#result').fadeIn();
                $('.claim-btn').fadeIn();
            }, 4000);
        }
        
        // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©
        function claimPrize() {
            if (!currentPrize) return;
            
            const [allowed, userId] = getUrlParams();
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙˆØª Ø¹Ø¨Ø± Webhook Ø£Ùˆ Telegram Bot API
            const message = `ğŸ Ù…Ø³ØªØ®Ø¯Ù… ID: ${userId} Ø±Ø¨Ø­ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©: ${currentPrize.text}`;
            
            // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø³ÙŠØ±ÙØ±Ùƒ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Telegram Bot API Ù…Ø¨Ø§Ø´Ø±Ø©
            fetch(`https://api.telegram.org/bot${8412416342:AAHOsPs5eqcaj5e-WpZHafMbhGYZI4mWiu0}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: userId,
                    text: `ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª Ø¬Ø§Ø¦Ø²Ø©: ${currentPrize.text}\n\nØªÙ… ØªÙØ¹ÙŠÙ„ Ø¬Ø§Ø¦Ø²ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!`,
                    parse_mode: 'HTML'
                })
            }).then(() => {
                alert('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ.');
                $('.claim-btn').hide();
            });
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        $(document).ready(function() {
            createWheel();
            const [allowed, userId] = getUrlParams();
            
            if (allowed !== 'yes') {
                $('.spin-btn').prop('disabled', true).text('â³ ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 24 Ø³Ø§Ø¹Ø©');
            }
        });
    </script>
</body>
</html>
