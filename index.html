<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ - ØªØ¬Ø±ÙŠØ¨ÙŠ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 900px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
        }
        
        .header h1 {
            font-size: 2.5rem;
            color: #FFD700;
            margin-bottom: 10px;
            text-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        
        .header p {
            color: #aaa;
            font-size: 1.1rem;
        }
        
        .warning {
            background: rgba(255, 68, 68, 0.2);
            border: 2px solid #ff4444;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .warning h3 {
            color: #ff4444;
            margin-bottom: 10px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .user-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .info-label {
            color: #4ecdc4;
            font-weight: bold;
        }
        
        .info-value {
            color: #FFD700;
            font-weight: bold;
        }
        
        .bot-controls {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
        }
        
        .control-item {
            margin-bottom: 20px;
        }
        
        .control-label {
            display: block;
            margin-bottom: 8px;
            color: #4ecdc4;
            font-weight: bold;
        }
        
        .token-display {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            font-family: monospace;
            word-break: break-all;
            color: #ffa500;
            border: 1px solid rgba(255, 165, 0, 0.3);
        }
        
        .btn {
            background: linear-gradient(45deg, #FF416C, #FF4B2B);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 65, 108, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }
        
        .btn-test {
            background: linear-gradient(45deg, #3498db, #2980b9);
        }
        
        .wheel-section {
            margin-top: 40px;
            text-align: center;
        }
        
        .wheel-container {
            position: relative;
            width: 350px;
            height: 350px;
            margin: 40px auto;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67);
            background: conic-gradient(
                #FF6B6B 0deg 45deg,
                #4ECDC4 45deg 90deg,
                #45B7D1 90deg 135deg,
                #96CEB4 135deg 180deg,
                #FFEAA7 180deg 225deg,
                #DDA0DD 225deg 270deg,
                #FFA07A 270deg 315deg,
                #20B2AA 315deg 360deg
            );
        }
        
        .wheel-pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #FFD700;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
        }
        
        .prizes {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 30px;
        }
        
        .prize-item {
            background: rgba(255, 215, 0, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #FFD700;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .response-log {
            margin-top: 40px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .log-title {
            color: #4ecdc4;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .log-item {
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .success { color: #2ecc71; }
        .error { color: #e74c3c; }
        .info { color: #3498db; }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .wheel-container {
                width: 300px;
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ØªØ­Ø°ÙŠØ± Ø£Ù…Ø§Ù† -->
        <div class="warning">
            <h3>âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù„Ù„ØªØ¬Ø±Ø¨Ø© ÙÙ‚Ø·!</h3>
            <p>Ø§Ù„ØªÙˆÙƒÙ† Ù…ÙƒØ´ÙˆÙ Ù‡Ù†Ø§ - Ù„Ø§ ØªØ³ØªØ®Ø¯Ù…Ù‡ ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø­Ù‚ÙŠÙ‚ÙŠ!</p>
        </div>
        
        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <div class="header">
            <h1>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©</h1>
            <p>Ø§Ù„Ø¨ÙˆØª: LuckyWheelBot | Ø§Ù„Ù†Ù…Ø·: Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ Telegram API</p>
        </div>
        
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="dashboard">
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
            <div class="user-info">
                <h3 style="color: #FFD700; margin-bottom: 20px;">ğŸ‘¤ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
                <div class="info-item">
                    <span class="info-label">Ù…Ø¹Ø±Ù Ø§Ù„ØªÙ„ØºØ±Ø§Ù…:</span>
                    <span class="info-value" id="userId">123456789</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</span>
                    <span class="info-value" id="username">test_user</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Ø¢Ø®Ø± Ø´Ø­Ù†:</span>
                    <span class="info-value" id="lastCharge">50$</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ:</span>
                    <span class="info-value" id="balance">150$</span>
                </div>
            </div>
            
            <!-- ØªØ­ÙƒÙ… Ø§Ù„Ø¨ÙˆØª -->
            <div class="bot-controls">
                <h3 style="color: #FFD700; margin-bottom: 20px;">ğŸ¤– Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª</h3>
                
                <div class="control-item">
                    <label class="control-label">ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª (Ù…ÙƒØ´ÙˆÙ):</label>
                    <div class="token-display" id="tokenDisplay">
                        7102912345:AAHabcdefghijklmnopqrstuvwxyzABCDEF
                    </div>
                    <button class="btn btn-test" onclick="testBotConnection()">
                        ğŸ”— Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Ø§Ù„Ø¨ÙˆØª
                    </button>
                </div>
                
                <div class="control-item">
                    <label class="control-label">Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‡Ø¯Ù:</label>
                    <input type="text" id="targetUserId" class="token-display" 
                           value="123456789" style="width: 100%; padding: 10px;">
                </div>
                
                <div class="control-item">
                    <label class="control-label">Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</label>
                    <input type="number" id="prizeAmount" class="token-display" 
                           value="100" style="width: 100%; padding: 10px;" min="1" max="1000">
                </div>
            </div>
        </div>
        
        <!-- Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ -->
        <div class="wheel-section">
            <h2 style="color: #FFD700; margin-bottom: 20px;">ğŸ¡ ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©</h2>
            
            <div class="wheel-container">
                <div class="wheel-pointer"></div>
                <div class="wheel" id="wheel"></div>
            </div>
            
            <button class="btn" onclick="spinWheel()" style="width: 200px; margin: 20px auto; display: block;">
                ğŸ¡ ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
            </button>
            
            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² -->
            <div class="prizes">
                <div class="prize-item">5$</div>
                <div class="prize-item">10$</div>
                <div class="prize-item">25$</div>
                <div class="prize-item">50$</div>
                <div class="prize-item">100$</div>
                <div class="prize-item">200$</div>
                <div class="prize-item">500$</div>
                <div class="prize-item">1000$</div>
            </div>
            
            <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button class="btn btn-success" onclick="sendDirectMessage()">
                    ğŸ“¨ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
                </button>
                <button class="btn btn-test" onclick="sendPrizeToUser()">
                    ğŸ Ø¥Ø±Ø³Ø§Ù„ Ø¬Ø§Ø¦Ø²Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                </button>
                <button class="btn" onclick="getChatInfo()">
                    â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
                </button>
            </div>
        </div>
        
        <!-- Ø³Ø¬Ù„ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª -->
        <div class="response-log">
            <div class="log-title">ğŸ“ Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØª:</div>
            <div id="logContainer"></div>
        </div>
    </div>

    <script>
        // âš ï¸ âš ï¸ âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ ØºÙŠØ± Ø¢Ù…Ù†! Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙ‚Ø· âš ï¸ âš ï¸ âš ï¸
        
        // ğŸ”“ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù…ÙƒØ´ÙˆÙ
        const BOT_TOKEN = "8497054736:AAF_EcYGx5UuEMdRbaYZz8zRCCkVYBwPHq4";
        const TELEGRAM_API = `https://api.telegram.org/bot${BOT_TOKEN}`;
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        let userId = null;
        let username = null;
        let lastCharge = 0;
        let balance = 0;
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
            const params = new URLSearchParams(window.location.search);
            userId = params.get('user_id') || '123456789';
            username = params.get('username') || 'test_user';
            lastCharge = params.get('last_charge') || '50';
            balance = params.get('balance') || '150';
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('userId').textContent = userId;
            document.getElementById('username').textContent = '@' + username;
            document.getElementById('lastCharge').textContent = lastCharge + '$';
            document.getElementById('balance').textContent = balance + '$';
            
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('targetUserId').value = userId;
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ø¬Ù„Ø©
            createWheel();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
            logMessage('ğŸš€ Ø§Ù„ØµÙØ­Ø© Ø¬Ø§Ù‡Ø²Ø© - Ø§Ù„ØªÙˆÙƒÙ† Ù…ÙƒØ´ÙˆÙ Ù„Ù„Ø¬Ù…ÙŠØ¹', 'info');
            logMessage(`ğŸ”‘ Ø§Ù„ØªÙˆÙƒÙ†: ${BOT_TOKEN.substring(0, 15)}...`, 'info');
        });
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸
        function createWheel() {
            const wheel = document.getElementById('wheel');
            const prizes = [5, 10, 25, 50, 100, 200, 500, 1000];
            
            prizes.forEach((prize, index) => {
                const segment = document.createElement('div');
                segment.style.position = 'absolute';
                segment.style.width = '100%';
                segment.style.height = '100%';
                segment.style.transformOrigin = 'center';
                segment.style.clipPath = `polygon(50% 50%, 50% 0%, 
                    ${50 + 50 * Math.cos((index * 45 - 22.5) * Math.PI / 180)}% 
                    ${50 - 50 * Math.sin((index * 45 - 22.5) * Math.PI / 180)}%)`;
                segment.style.transform = `rotate(${index * 45}deg)`;
                segment.style.display = 'flex';
                segment.style.alignItems = 'center';
                segment.style.justifyContent = 'center';
                
                const text = document.createElement('span');
                text.textContent = `${prize}$`;
                text.style.transform = `rotate(22.5deg) translateY(-120px)`;
                text.style.color = '#000';
                text.style.fontWeight = 'bold';
                text.style.fontSize = '16px';
                
                segment.appendChild(text);
                wheel.appendChild(segment);
            });
        }
        
        // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
        function spinWheel() {
            const wheel = document.getElementById('wheel');
            const prizes = [5, 10, 25, 50, 100, 200, 500, 1000];
            const prizeIndex = Math.floor(Math.random() * prizes.length);
            const prize = prizes[prizeIndex];
            
            const extraRotations = 5;
            const segmentAngle = 45;
            const targetAngle = (extraRotations * 360) + (360 - (prizeIndex * segmentAngle));
            
            wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.32, 0.97)';
            wheel.style.transform = `rotate(${targetAngle}deg)`;
            
            setTimeout(() => {
                logMessage(`ğŸ‰ ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©: ÙØ²Øª Ø¨Ù€ ${prize}$`, 'success');
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© ÙÙŠ Ø§Ù„Ø­Ù‚Ù„
                document.getElementById('prizeAmount').value = prize;
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                sendPrize(prize);
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø¬Ù„Ø©
                setTimeout(() => {
                    wheel.style.transition = 'none';
                    wheel.style.transform = 'rotate(0deg)';
                    setTimeout(() => {
                        wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.32, 0.97)';
                    }, 50);
                }, 1000);
                
            }, 4000);
        }
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Ø§Ù„Ø¨ÙˆØª
        async function testBotConnection() {
            logMessage('ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Ø§Ù„Ø¨ÙˆØª...', 'info');
            
            try {
                const response = await fetch(`${TELEGRAM_API}/getMe`);
                const data = await response.json();
                
                if (data.ok) {
                    const botName = data.result.first_name;
                    const botUsername = data.result.username;
                    logMessage(`âœ… Ø§Ù„Ø¨ÙˆØª Ù…ØªØµÙ„: ${botName} (@${botUsername})`, 'success');
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    await sendMessageToUser(userId, `âœ… Ø§ØªØµØ§Ù„ Ø§Ù„Ø¨ÙˆØª Ù†Ø§Ø¬Ø­: ${botName}`);
                    
                } else {
                    logMessage(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙˆØª: ${data.description}`, 'error');
                }
            } catch (error) {
                logMessage(`âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`, 'error');
            }
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        async function sendDirectMessage() {
            const targetId = document.getElementById('targetUserId').value;
            
            if (!targetId) {
                logMessage('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', 'error');
                return;
            }
            
            const message = `ğŸŠ Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ ÙØ²Øª Ø¨Ø¬Ø§Ø¦Ø²Ø© Ù…Ù† Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸!\n\nğŸ”” Ù‡Ø°Ù‡ Ø±Ø³Ø§Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† ØµÙØ­Ø© HTML`;
            
            logMessage(`ğŸ“¨ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${targetId}...`, 'info');
            
            try {
                await sendMessageToUser(targetId, message);
                logMessage('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch (error) {
                logMessage(`âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©: ${error}`, 'error');
            }
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø¬Ø§Ø¦Ø²Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        async function sendPrizeToUser() {
            const targetId = document.getElementById('targetUserId').value;
            const prize = document.getElementById('prizeAmount').value;
            
            if (!targetId || !prize) {
                logMessage('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
                return;
            }
            
            await sendPrize(prize, targetId);
        }
        
        // Ø¯Ø§Ù„Ø© Ø¹Ø§Ù…Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©
        async function sendPrize(prizeAmount, specificUserId = null) {
            const targetId = specificUserId || userId;
            
            logMessage(`ğŸ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¬Ø§Ø¦Ø²Ø© ${prizeAmount}$ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${targetId}...`, 'info');
            
            // 1. Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const userMessage = `ğŸ‰ **Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª Ø¬Ø§Ø¦Ø²Ø©**\n\nğŸ† Ø§Ù„Ù‚ÙŠÙ…Ø©: ${prizeAmount}$\nğŸ’° Ø³ØªØ¶Ø§Ù Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹\n\nğŸ¡ Ù…Ù†: Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸`;
            
            try {
                await sendMessageToUser(targetId, userMessage);
                logMessage(`âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…`, 'success');
            } catch (error) {
                logMessage(`âš ï¸ ØªØ­Ø°ÙŠØ±: ${error}`, 'error');
            }
            
            // 2. Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©
            const adminMessage = `ğŸ“Š **ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ø¦Ø²Ø© Ø¬Ø¯ÙŠØ¯Ø©**\n\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${targetId}\nğŸ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©: ${prizeAmount}$\nâ° Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleTimeString()}`;
            
            try {
                // Ù‡Ù†Ø§ Ø¶Ø¹ Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
                await sendMessageToUser('123456789', adminMessage); // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ù€ ID Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
                logMessage(`ğŸ“¤ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©`, 'success');
            } catch (error) {
                logMessage(`âš ï¸ Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©`, 'info');
            }
            
            // 3. ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù‡Ù†Ø§ ØªØ­ØªØ§Ø¬ Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
            logMessage(`ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...`, 'info');
            
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯
            setTimeout(() => {
                const newBalance = parseInt(balance) + parseInt(prizeAmount);
                document.getElementById('balance').textContent = newBalance + '$';
                logMessage(`ğŸ’° ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯: ${balance}$ â†’ ${newBalance}$`, 'success');
                balance = newBalance;
            }, 1000);
        }
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
        async function getChatInfo() {
            const targetId = document.getElementById('targetUserId').value;
            
            logMessage(`â„¹ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ${targetId}...`, 'info');
            
            try {
                const response = await fetch(`${TELEGRAM_API}/getChat?chat_id=${targetId}`);
                const data = await response.json();
                
                if (data.ok) {
                    const chat = data.result;
                    logMessage(`ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©:\nØ§Ù„Ø§Ø³Ù…: ${chat.first_name || chat.title}\nØ§Ù„Ù†ÙˆØ¹: ${chat.type}\nÙ…Ø¹Ø±Ù: ${chat.id}`, 'success');
                } else {
                    logMessage(`âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©: ${data.description}`, 'error');
                }
            } catch (error) {
                logMessage(`âŒ Ø®Ø·Ø£: ${error.message}`, 'error');
            }
        }
        
        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        async function sendMessageToUser(chatId, text) {
            try {
                const response = await fetch(`${TELEGRAM_API}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: text,
                        parse_mode: 'HTML'
                    })
                });
                
                const data = await response.json();
                
                if (!data.ok) {
                    throw new Error(data.description || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ');
                }
                
                return data;
            } catch (error) {
                throw error;
            }
        }
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
        function logMessage(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const logItem = document.createElement('div');
            
            const time = new Date().toLocaleTimeString();
            logItem.className = `log-item ${type}`;
            logItem.innerHTML = `<strong>[${time}]</strong> ${message}`;
            
            logContainer.appendChild(logItem);
            logContainer.scrollTop = logContainer.scrollHeight;
            
            // Ø·Ø¨Ø§Ø¹Ø© ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ Ø£ÙŠØ¶Ø§Ù‹
            console.log(`[${type.toUpperCase()}] ${message}`);
        }
        
        // Ø£Ø²Ø±Ø§Ø± ØªØ­ÙƒÙ… Ø¥Ø¶Ø§ÙÙŠØ©
        async function sendTestCommand() {
            const command = "/balance"; // Ø£Ùˆ Ø£ÙŠ Ø£Ù…Ø± ØªØ±ÙŠØ¯ Ø§Ø®ØªØ¨Ø§Ø±Ù‡
            logMessage(`ğŸ¤– Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø±: ${command}`, 'info');
            
            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø± Ù„Ù„Ø¨ÙˆØª
                await sendMessageToUser(userId, command);
                logMessage(`âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø± ${command}`, 'success');
            } catch (error) {
                logMessage(`âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±: ${error}`, 'error');
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
        function updateUserFromURL() {
            const params = new URLSearchParams(window.location.search);
            const newUserId = params.get('user_id');
            const newUsername = params.get('username');
            const newCharge = params.get('last_charge');
            
            if (newUserId) {
                userId = newUserId;
                document.getElementById('userId').textContent = userId;
                document.getElementById('targetUserId').value = userId;
            }
            
            if (newUsername) {
                username = newUsername;
                document.getElementById('username').textContent = '@' + username;
            }
            
            if (newCharge) {
                lastCharge = newCharge;
                document.getElementById('lastCharge').textContent = lastCharge + '$';
            }
            
            logMessage('ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·', 'info');
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø£Ø²Ø±Ø§Ø± ØªØ­ÙƒÙ… Ø³Ø±ÙŠØ¹Ø©
        document.addEventListener('keydown', function(e) {
            // Ctrl + Enter Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©
            if (e.ctrlKey && e.key === 'Enter') {
                spinWheel();
            }
            
            // Ctrl + T Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
            if (e.ctrlKey && e.key === 't') {
                testBotConnection();
            }
            
            // Ctrl + R Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (e.ctrlKey && e.key === 'r') {
                updateUserFromURL();
            }
        });
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
        document.getElementById('tokenDisplay').addEventListener('click', function() {
            logMessage(`ğŸ”“ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„ÙƒØ§Ù…Ù„: ${BOT_TOKEN}`, 'info');
            alert(`âš ï¸ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ù…ÙƒØ´ÙˆÙ:\n${BOT_TOKEN}\n\nÙ‡Ø°Ø§ ØºÙŠØ± Ø¢Ù…Ù† Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙØ¹Ù„ÙŠ!`);
        });
        
        // Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ
        setTimeout(() => {
            logMessage('ğŸ”” Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„ØªØ¯ÙˆÙŠØ±', 'success');
            logMessage('ğŸ’¡ ØªÙ„Ù…ÙŠØ­: Ø§Ø³ØªØ®Ø¯Ù… Ctrl+Enter Ù„ØªØ¯ÙˆÙŠØ± Ø³Ø±ÙŠØ¹', 'info');
        }, 1000);
    </script>
</body>
</html>

